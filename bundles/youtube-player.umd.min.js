!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@angular/youtube-player",["exports","@angular/core","@angular/common","rxjs","rxjs/operators"],t):t(((e=e||self).ng=e.ng||{},e.ng.youtubePlayer={}),e.ng.core,e.ng.common,e.rxjs,e.rxjs.operators)}(this,(function(e,t,n,i,r){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var a=function(){return(a=Object.assign||function e(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var a in n=arguments[i])Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);return t}).apply(this,arguments)};function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var s=640,u=390,p=function(){function e(e,t){this._ngZone=e,this._youtubeContainer=new i.Subject,this._destroyed=new i.Subject,this._playerChanges=new i.BehaviorSubject(void 0),this._videoId=new i.BehaviorSubject(void 0),this._height=new i.BehaviorSubject(u),this._width=new i.BehaviorSubject(s),this._startSeconds=new i.BehaviorSubject(void 0),this._endSeconds=new i.BehaviorSubject(void 0),this._suggestedQuality=new i.BehaviorSubject(void 0),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=t?n.isPlatformBrowser(t):"object"==typeof window&&!!window}return Object.defineProperty(e.prototype,"videoId",{get:function(){return this._videoId.value},set:function(e){this._videoId.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height.value},set:function(e){this._height.next(e||u)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width.value},set:function(e){this._width.next(e||s)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startSeconds",{set:function(e){this._startSeconds.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endSeconds",{set:function(e){this._endSeconds.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suggestedQuality",{set:function(e){this._suggestedQuality.next(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;if(this._isBrowser){var t=i.of(!0);if(!window.YT){if(this.showBeforeIframeApiLoads)throw new Error("Namespace YT not found, cannot construct embedded youtube player. Please install the YouTube Player API Reference for iframe Embeds: https://developers.google.com/youtube/iframe_api_reference");var n=new i.Subject;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=function(){e._existingApiReadyCallback&&e._existingApiReadyCallback(),e._ngZone.run((function(){return n.next(!0)}))},t=n.pipe(r.take(1),r.startWith(!1))}var s=function p(e,t,n,a,s,u){var p=t.pipe(r.withLatestFrom(i.combineLatest([a,s])),r.map((function(e){var t=o(e,2),n=t[0],i=o(t[1],2);return n?{videoId:n,width:i[0],height:i[1]}:void 0})));return i.combineLatest([e,p,i.of(u)]).pipe(function y(e){return i.pipe(r.combineLatest(e),r.skipWhile((function(e){return!o(e,2)[1]})),r.map((function(e){return o(e,1)[0]})))}(n),r.scan(l,void 0),r.distinctUntilChanged())}(this._youtubeContainer,this._videoId,t,this._width,this._height,this._ngZone).pipe(function u(e){return r.flatMap((function(t){return t?y(t)?i.of(t):new i.Observable((function(n){var i=!1,r=!1,a=function(e){r=!0,i||(e.target.removeEventListener("onReady",a),n.next(e.target))};return t.addEventListener("onReady",a),function(){i=!0,r||e(t)}})).pipe(r.take(1),r.startWith(void 0)):i.of(void 0)}))}((function(e){y(e)||e.destroy()})),r.takeUntil(this._destroyed),r.publish());s.subscribe((function(t){e._player=t,e._playerChanges.next(t),t&&e._pendingPlayerState&&e._initializePlayer(t,e._pendingPlayerState),e._pendingPlayerState=void 0})),function d(e,t,n){i.combineLatest([e,t,n]).subscribe((function(e){var t=o(e,3),n=t[0];return n&&n.setSize(t[1],t[2])}))}(s,this._width,this._height),function h(e,t){i.combineLatest([e,t]).subscribe((function(e){var t=o(e,2),n=t[0],i=t[1];return n&&i&&n.setPlaybackQuality(i)}))}(s,this._suggestedQuality),function g(e,t,n,s,u,p){var l=i.combineLatest([n,s]).pipe(r.map((function(e){var t=o(e,2);return{startSeconds:t[0],endSeconds:t[1]}}))),y=l.pipe(c(e,(function(e){return!!e&&!function t(e){var t=e.getPlayerState();return-1!==t&&5!==t}(e)}))),d=t.pipe(c(e,(function(e,t){return!!e&&e.videoId!==t}))),h=e.pipe(c(i.combineLatest([t,l]),(function(e,t){var n=o(e,2),i=n[1];return!(!t||n[0]==t.videoId&&!i.startSeconds&&!i.endSeconds)})));i.merge(h,d,y).pipe(r.withLatestFrom(i.combineLatest([e,t,l,u])),r.map((function(e){return o(e,2)[1]})),r.takeUntil(p)).subscribe((function(e){var t=o(e,4),n=t[0],i=t[1],r=t[2],s=t[3];i&&n&&(n.videoId=i,n.cueVideoById(a({videoId:i,suggestedQuality:s},r)))}))}(s,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),s.connect()}},e.prototype.createEventsBoundInZone=function(){return{}},e.prototype.ngAfterViewInit=function(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)},e.prototype.ngOnDestroy=function(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._destroyed.next(),this._destroyed.complete()},e.prototype.playVideo=function(){this._player?this._player.playVideo():this._getPendingState().playbackState=1},e.prototype.pauseVideo=function(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=2},e.prototype.stopVideo=function(){this._player?this._player.stopVideo():this._getPendingState().playbackState=5},e.prototype.seekTo=function(e,t){this._player?this._player.seekTo(e,t):this._getPendingState().seek={seconds:e,allowSeekAhead:t}},e.prototype.mute=function(){this._player?this._player.mute():this._getPendingState().muted=!0},e.prototype.unMute=function(){this._player?this._player.unMute():this._getPendingState().muted=!1},e.prototype.isMuted=function(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted},e.prototype.setVolume=function(e){this._player?this._player.setVolume(e):this._getPendingState().volume=e},e.prototype.getVolume=function(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0},e.prototype.setPlaybackRate=function(e){if(this._player)return this._player.setPlaybackRate(e);this._getPendingState().playbackRate=e},e.prototype.getPlaybackRate=function(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0},e.prototype.getAvailablePlaybackRates=function(){return this._player?this._player.getAvailablePlaybackRates():[]},e.prototype.getVideoLoadedFraction=function(){return this._player?this._player.getVideoLoadedFraction():0},e.prototype.getPlayerState=function(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:-1},e.prototype.getCurrentTime=function(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0},e.prototype.getPlaybackQuality=function(){return this._player?this._player.getPlaybackQuality():"default"},e.prototype.getAvailableQualityLevels=function(){return this._player?this._player.getAvailableQualityLevels():[]},e.prototype.getDuration=function(){return this._player?this._player.getDuration():0},e.prototype.getVideoUrl=function(){return this._player?this._player.getVideoUrl():""},e.prototype.getVideoEmbedCode=function(){return this._player?this._player.getVideoEmbedCode():""},e.prototype._getPendingState=function(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState},e.prototype._initializePlayer=function(e,t){var n=t.playbackRate,i=t.volume,r=t.muted,a=t.seek;switch(t.playbackState){case 1:e.playVideo();break;case 2:e.pauseVideo();break;case 5:e.stopVideo()}null!=n&&e.setPlaybackRate(n),null!=i&&e.setVolume(i),null!=r&&(r?e.mute():e.unMute()),null!=a&&e.seekTo(a.seconds,a.allowSeekAhead)},e.prototype._getLazyEmitter=function(e){var t=this;return this._playerChanges.pipe(r.switchMap((function(t){return t?i.fromEventPattern((function(n){t.addEventListener(e,n)}),(function(n){try{t.removeEventListener(e,n)}catch(e){}})):i.of()})),(function(e){return new i.Observable((function(n){return e.subscribe({next:function(e){return t._ngZone.run((function(){return n.next(e)}))},error:function(e){return n.error(e)},complete:function(){return n.complete()}})}))}),r.takeUntil(this._destroyed))},e.decorators=[{type:t.Component,args:[{selector:"youtube-player",changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,template:"<div #youtubeContainer></div>"}]}],e.ctorParameters=function(){return[{type:t.NgZone},{type:Object,decorators:[{type:t.Optional},{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.propDecorators={videoId:[{type:t.Input}],height:[{type:t.Input}],width:[{type:t.Input}],startSeconds:[{type:t.Input}],endSeconds:[{type:t.Input}],suggestedQuality:[{type:t.Input}],showBeforeIframeApiLoads:[{type:t.Input}],ready:[{type:t.Output}],stateChange:[{type:t.Output}],error:[{type:t.Output}],apiChange:[{type:t.Output}],playbackQualityChange:[{type:t.Output}],playbackRateChange:[{type:t.Output}],youtubeContainer:[{type:t.ViewChild,args:["youtubeContainer"]}]},e}();function l(e,t){var n=o(t,3),i=n[0],r=n[1];if(r){if(e)return e;var a=n[2].runOutsideAngular((function(){return new YT.Player(i,r)}));return a.videoId=r.videoId,a}e&&e.destroy()}function y(e){return"getPlayerStatus"in e}function c(e,t){return i.pipe(r.withLatestFrom(e),r.filter((function(e){var n=o(e,2);return t(n[1],n[0])})),r.map((function(e){return o(e,1)[0]})))}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var d=[p],h=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:d,exports:d}]}],e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
e.YouTubePlayer=p,e.YouTubePlayerModule=h,Object.defineProperty(e,"__esModule",{value:!0})}));